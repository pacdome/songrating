<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOME.MUSIC.SYSTEM.EXE</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323:wght@400&display=swap');
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            background: #0a0a0a;
            color: #00ff41;
            font-family: 'VT323', 'Courier New', monospace;
            font-size: 16px;
            line-height: 1.2;
            overflow-x: hidden;
            background-image: 
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0, 255, 65, 0.03) 2px,
                    rgba(0, 255, 65, 0.03) 4px
                );
            animation: staticNoise 0.1s infinite;
        }
        
        @keyframes staticNoise {
            0% { background-position: 0 0; }
            100% { background-position: 0 4px; }
        }
        
        .crt-container {
            max-width: 1200px;
            margin: 20px auto;
            border: 20px solid #222;
            border-radius: 15px;
            background: #000;
            box-shadow: 
                0 0 50px rgba(0, 255, 65, 0.3),
                inset 0 0 50px rgba(0, 255, 65, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .crt-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                rgba(18, 16, 16, 0) 50%,
                rgba(0, 0, 0, 0.25) 50%
            );
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 1000;
        }
        
        .terminal-screen {
            padding: 30px;
            min-height: 600px;
            background: #000;
            position: relative;
        }
        
        .boot-sequence {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            color: #00ff41;
            font-family: 'VT323', monospace;
            font-size: 18px;
            padding: 50px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            animation: fadeOut 3s ease-in-out 4s forwards;
        }
        
        @keyframes fadeOut {
            to { opacity: 0; visibility: hidden; }
        }
        
        .boot-line {
            margin-bottom: 10px;
            opacity: 0;
            animation: typeIn 0.5s ease-out forwards;
        }
        
        .boot-line:nth-child(1) { animation-delay: 0.2s; }
        .boot-line:nth-child(2) { animation-delay: 0.8s; }
        .boot-line:nth-child(3) { animation-delay: 1.4s; }
        .boot-line:nth-child(4) { animation-delay: 2.0s; }
        .boot-line:nth-child(5) { animation-delay: 2.6s; }
        .boot-line:nth-child(6) { animation-delay: 3.2s; }
        
        @keyframes typeIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .system-header {
            border: 2px solid #00ff41;
            padding: 15px;
            margin-bottom: 20px;
            background: rgba(0, 255, 65, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .system-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 65, 0.2), transparent);
            animation: scanLine 3s infinite;
        }
        
        @keyframes scanLine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .system-title {
            font-size: 32px;
            text-align: center;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #00ff41;
            animation: pulse 2s infinite alternate;
        }
        
        @keyframes pulse {
            from { text-shadow: 0 0 10px #00ff41; }
            to { text-shadow: 0 0 20px #00ff41, 0 0 30px #00ff41; }
        }
        
        .system-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            font-size: 14px;
        }
        
        .info-panel {
            border: 1px solid #00ff41;
            padding: 10px;
            background: rgba(0, 255, 65, 0.02);
        }
        
        .info-label {
            color: #ffff00;
            display: inline-block;
            min-width: 120px;
        }
        
        .command-line {
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid #00ff41;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .prompt {
            color: #ffff00;
        }
        
        .cursor {
            animation: blink 1s infinite;
            background: #00ff41;
            color: #000;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .menu-option {
            border: 2px solid #00ff41;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(0, 255, 65, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .menu-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(0, 255, 65, 0.2);
            transition: left 0.3s ease;
        }
        
        .menu-option:hover::before {
            left: 0;
        }
        
        .menu-option:hover {
            background: rgba(0, 255, 65, 0.15);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
            transform: scale(1.05);
        }
        
        .menu-option.active {
            background: rgba(0, 255, 65, 0.2);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.7);
        }
        
        .menu-icon {
            font-size: 24px;
            margin-bottom: 10px;
            display: block;
        }
        
        .menu-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .menu-desc {
            font-size: 12px;
            color: #888;
        }
        
        .content-window {
            border: 2px solid #00ff41;
            background: rgba(0, 0, 0, 0.8);
            min-height: 400px;
            position: relative;
        }
        
        .window-header {
            background: rgba(0, 255, 65, 0.2);
            padding: 10px 15px;
            border-bottom: 1px solid #00ff41;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .window-title {
            font-size: 18px;
            font-weight: bold;
        }
        
        .window-controls {
            display: flex;
            gap: 5px;
        }
        
        .window-btn {
            width: 20px;
            height: 20px;
            border: 1px solid #00ff41;
            background: rgba(0, 255, 65, 0.1);
            color: #00ff41;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        .window-btn:hover {
            background: rgba(0, 255, 65, 0.3);
        }
        
        .window-content {
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .controls-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .control-group {
            border: 1px solid #00ff41;
            padding: 10px;
            background: rgba(0, 255, 65, 0.02);
        }
        
        .control-label {
            color: #ffff00;
            font-size: 14px;
            margin-bottom: 5px;
            display: block;
        }
        
        input, select {
            background: #000;
            border: 1px solid #00ff41;
            color: #00ff41;
            padding: 5px;
            font-family: inherit;
            font-size: 14px;
            width: 100%;
        }
        
        input:focus, select:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }
        
        .album-matrix {
            display: grid;
            gap: 10px;
        }
        
        .album-row {
            border: 1px solid #00ff41;
            background: rgba(0, 255, 65, 0.02);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .album-row:hover {
            background: rgba(0, 255, 65, 0.1);
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.3);
        }
        
        .album-row.expanded {
            background: rgba(0, 255, 65, 0.05);
        }
        
        .album-header-row {
            padding: 10px 15px;
            display: grid;
            grid-template-columns: 30px 2fr 1fr 1fr 80px;
            gap: 15px;
            align-items: center;
        }
        
        .status-indicator {
            width: 20px;
            height: 20px;
            border: 1px solid #00ff41;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            animation: rotate 2s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .album-title-cell {
            font-weight: bold;
            color: #ffff00;
        }
        
        .album-year-cell {
            color: #888;
        }
        
        .album-tracks-cell {
            color: #888;
        }
        
        .album-rating-cell {
            text-align: center;
            font-weight: bold;
            padding: 5px;
            border: 1px solid #00ff41;
            background: rgba(0, 0, 0, 0.5);
        }
        
        .rating-perfect { color: #ff0040; text-shadow: 0 0 10px #ff0040; }
        .rating-excellent { color: #ff4400; text-shadow: 0 0 8px #ff4400; }
        .rating-great { color: #ffaa00; text-shadow: 0 0 6px #ffaa00; }
        .rating-good { color: #ffff00; text-shadow: 0 0 4px #ffff00; }
        .rating-okay { color: #88ff00; text-shadow: 0 0 2px #88ff00; }
        .rating-poor { color: #00ff41; }
        
        .album-details {
            display: none;
            border-top: 1px solid #00ff41;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
        }
        
        .album-details.show {
            display: block;
        }
        
        .tracks-grid {
            display: grid;
            grid-template-columns: 40px 3fr 1fr 100px;
            gap: 10px;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .tracks-header {
            font-weight: bold;
            color: #ffff00;
            border-bottom: 1px solid #00ff41;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        
        .track-row {
            display: contents;
            font-size: 14px;
        }
        
        .track-row > div {
            padding: 5px;
            border-bottom: 1px dotted #333;
        }
        
        .track-number {
            text-align: center;
            color: #888;
        }
        
        .track-name {
            color: #00ff41;
        }
        
        .track-name.favorite {
            color: #ff4400;
            font-weight: bold;
        }
        
        .track-name.interlude {
            color: #666;
            font-style: italic;
        }
        
        .track-rating {
            text-align: center;
            font-weight: bold;
        }
        
        .track-status {
            text-align: center;
            font-size: 12px;
        }
        
        .album-comment-box {
            margin-top: 15px;
            border: 1px solid #00ff41;
            background: rgba(255, 255, 0, 0.05);
            padding: 10px;
            font-style: italic;
        }
        
        .album-comment-box::before {
            content: "> NOTIZEN: ";
            color: #ffff00;
            font-weight: bold;
            font-style: normal;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .data-table th,
        .data-table td {
            border: 1px solid #00ff41;
            padding: 8px;
            text-align: left;
        }
        
        .data-table th {
            background: rgba(0, 255, 65, 0.2);
            color: #ffff00;
            font-weight: bold;
        }
        
        .data-table tr:nth-child(even) {
            background: rgba(0, 255, 65, 0.02);
        }
        
        .pagination-bar {
            text-align: center;
            margin: 20px 0;
        }
        
        .page-btn {
            border: 1px solid #00ff41;
            background: rgba(0, 255, 65, 0.1);
            color: #00ff41;
            padding: 5px 10px;
            margin: 0 2px;
            cursor: pointer;
            font-family: inherit;
            font-size: 14px;
        }
        
        .page-btn:hover {
            background: rgba(0, 255, 65, 0.3);
        }
        
        .page-btn.active {
            background: rgba(0, 255, 65, 0.5);
            color: #000;
        }
        
        .system-footer {
            border-top: 1px solid #00ff41;
            padding: 15px;
            background: rgba(0, 255, 65, 0.05);
            text-align: center;
            font-size: 12px;
            color: #888;
        }
        
        .glitch {
            animation: glitch 0.3s infinite;
        }
        
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
        
        .loading-bar {
            width: 100%;
            height: 20px;
            border: 1px solid #00ff41;
            background: #000;
            position: relative;
            margin: 10px 0;
        }
        
        .loading-progress {
            height: 100%;
            background: linear-gradient(90deg, #00ff41, #ffff00, #00ff41);
            width: 0%;
            animation: loadProgress 2s ease-out forwards;
        }
        
        @keyframes loadProgress {
            to { width: 100%; }
        }
        
        @media (max-width: 768px) {
            .crt-container {
                margin: 10px;
                border-width: 10px;
            }
            
            .terminal-screen {
                padding: 15px;
            }
            
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .controls-panel {
                grid-template-columns: 1fr;
            }
            
            .album-header-row {
                grid-template-columns: 1fr;
                gap: 5px;
                text-align: center;
            }
            
            .tracks-grid {
                grid-template-columns: 1fr;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Boot Sequence -->
    <div class="boot-sequence" id="bootSequence">
        <div class="boot-line">INITIALIZING DOME.MUSIC.SYSTEM.EXE...</div>
        <div class="boot-line">LOADING ALBUM DATABASE... [████████████████████] 100%</div>
        <div class="boot-line">CALIBRATING AUDIO MATRIX... OK</div>
        <div class="boot-line">ESTABLISHING NEURAL LINK... CONNECTED</div>
        <div class="boot-line">ACTIVATING MUSIC INTERFACE... READY</div>
        <div class="boot-line">SYSTEM ONLINE. WELCOME, DOME.</div>
    </div>

    <div class="crt-container">
        <div class="terminal-screen">
            <!-- System Header -->
            <div class="system-header">
                <div class="system-title">◈ DOME.MUSIC.SYSTEM.EXE ◈</div>
                <div class="system-info">
                    <div class="info-panel">
                        <div><span class="info-label">SYSTEM STATUS:</span> <span style="color: #00ff41;">ONLINE</span></div>
                        <div><span class="info-label">USER LEVEL:</span> <span style="color: #ffff00;">ADMIN</span></div>
                    </div>
                    <div class="info-panel">
                        <div><span class="info-label">ALBUMS LOADED:</span> <span id="systemAlbumCount">0</span></div>
                        <div><span class="info-label">TRACKS INDEXED:</span> <span id="systemSongCount">0</span></div>
                    </div>
                    <div class="info-panel">
                        <div><span class="info-label">AVG RATING:</span> <span id="systemAvgRating">0.0</span>/10</div>
                        <div><span class="info-label">TIMESTAMP:</span> <span id="systemTimestamp">--</span></div>
                    </div>
                </div>
            </div>

            <!-- Command Line -->
            <div class="command-line">
                <span class="prompt">dome@music-system:~$</span> 
                <span id="commandText">execute music_interface.exe</span>
                <span class="cursor">█</span>
            </div>

            <!-- Menu Grid -->
            <div class="menu-grid">
                <div class="menu-option active" onclick="executeCommand('albums')">
                    <span class="menu-icon">📀</span>
                    <div class="menu-title">ALBUM_MATRIX</div>
                    <div class="menu-desc">Durchsuche die Album-Datenbank</div>
                </div>
                <div class="menu-option" onclick="executeCommand('stats')">
                    <span class="menu-icon">📊</span>
                    <div class="menu-title">DATA_ANALYSIS</div>
                    <div class="menu-desc">Statistische Auswertungen</div>
                </div>
                <div class="menu-option" onclick="executeCommand('favorites')">
                    <span class="menu-icon">⭐</span>
                    <div class="menu-title">PRIORITY_TRACKS</div>
                    <div class="menu-desc">Favoriten-Katalog</div>
                </div>
                <div class="menu-option" onclick="executeCommand('top-rated')">
                    <span class="menu-icon">🏆</span>
                    <div class="menu-title">TOP_RANKED</div>
                    <div class="menu-desc">Höchstbewertete Titel</div>
                </div>
                <div class="menu-option" onclick="executeCommand('neural-scan')">
                    <span class="menu-icon">🧠</span>
                    <div class="menu-title">NEURAL_SCAN</div>
                    <div class="menu-desc">KI-Musikanalyse</div>
                </div>
                <div class="menu-option" onclick="executeCommand('system-info')">
                    <span class="menu-icon">💾</span>
                    <div class="menu-title">SYSTEM_INFO</div>
                    <div class="menu-desc">Systeminformationen</div>
                </div>
            </div>

            <!-- Content Window -->
            <div class="content-window">
                <div class="window-header">
                    <span class="window-title" id="windowTitle">ALBUM_MATRIX.EXE</span>
                    <div class="window-controls">
                        <div class="window-btn">_</div>
                        <div class="window-btn">□</div>
                        <div class="window-btn">×</div>
                    </div>
                </div>
                <div class="window-content" id="windowContent">
                    <!-- Content will be loaded here -->
                </div>
            </div>

            <!-- System Footer -->
            <div class="system-footer">
                <div>DOME.MUSIC.SYSTEM.EXE v2.4.1 | COPYRIGHT 2024 | NEURAL INTERFACE ACTIVE</div>
                <div>POWERED BY QUANTUM ALGORITHMS AND CAFFEINE</div>
            </div>
        </div>
    </div>

    <script>
        let albums = [];
        let currentAlbums = [];
        let currentPage = 1;
        let currentModule = 'albums';
        const albumsPerPage = 8;

        // Sample data - replace with actual albums.json loading
        const albumsData = [
            {
                "artist": "Third Eye Blind",
                "album": "Third Eye Blind",
                "year": 1997,
                "comment": "Eines meiner liebsten selftilted Debut-Alben & vllt einer der besten A Seiten auf einem Album, leider aber auch eine bei der die B Seite nicht mithalten kann.",
                "songs": [
                    {"name": "Losing a Whole Year", "rating": 6.5, "favorite": false, "interlude": false},
                    {"name": "Narcolepsy", "rating": 7.5, "favorite": false, "interlude": false},
                    {"name": "Semi-Charmed Life", "rating": 10, "favorite": true, "interlude": false},
                    {"name": "Jumper", "rating": 9, "favorite": false, "interlude": false},
                    {"name": "Graduate", "rating": 8, "favorite": false, "interlude": false},
                    {"name": "How's It Going to Be", "rating": 8, "favorite": false, "interlude": false},
                    {"name": "Thanks a Lot", "rating": 8.5, "favorite": false, "interlude": false},
                    {"name": "Burning Man", "rating": 7, "favorite": false, "interlude": false},
                    {"name": "Good for You", "rating": 7, "favorite": false, "interlude": false},
                    {"name": "London", "rating": 6.5, "favorite": false, "interlude": false},
                    {"name": "I Want You", "rating": 6.5, "favorite": false, "interlude": false},
                    {"name": "The Background", "rating": 8, "favorite": false, "interlude": false},
                    {"name": "Motorcycle Drive By", "rating": 7.5, "favorite": false, "interlude": false},
                    {"name": "God of Wine", "rating": 7, "favorite": false, "interlude": false}
                ]
            },
            {
                "artist": "Blur",
                "album": "Parklife",
                "year": 1994,
                "comment": "Nach dem hören ist man ein Brite, nicht jeder Song kann so gut sein wie Parklife, aber sie schaffen zusammen ein Gesamtkunstwerk",
                "songs": [
                    {"name": "Girls & Boys", "rating": 9, "favorite": false, "interlude": false},
                    {"name": "Tracy Jacks", "rating": 7.5, "favorite": false, "interlude": false},
                    {"name": "End of a Century", "rating": 8, "favorite": false, "interlude": false},
                    {"name": "Parklife", "rating": 10, "favorite": true, "interlude": false},
                    {"name": "Bank Holiday", "rating": 7.5, "favorite": false, "interlude": false},
                    {"name": "Badhead", "rating": 7, "favorite": false, "interlude": false},
                    {"name": "The Debt Collector", "rating": 6, "favorite": false, "interlude": true},
                    {"name": "Far Out", "rating": 6, "favorite": false, "interlude": true},
                    {"name": "To the End", "rating": 6.5, "favorite": false, "interlude": false},
                    {"name": "London Loves", "rating": 8, "favorite": false, "interlude": false},
                    {"name": "Trouble in the Message Center", "rating": 7.5, "favorite": false, "interlude": false},
                    {"name": "Clover Over Dover", "rating": 7, "favorite": false, "interlude": false},
                    {"name": "Magical America", "rating": 6.5, "favorite": false, "interlude": false},
                    {"name": "Jubilee", "rating": 7, "favorite": false, "interlude": false},
                    {"name": "This Is a Low", "rating": 7.5, "favorite": false, "interlude": false},
                    {"name": "Lot 105", "rating": 6, "favorite": false, "interlude": true}
                ]
            },
            {
                "artist": "The Stone Roses",
                "album": "The Stone Roses",
                "year": 1989,
                "comment": "Das beste Debut-Album jemals. Es gibt nichts wie die Stone Roses & erst recht nichts wie dieses album.",
                "songs": [
                    {"name": "I Wanna Be Adored", "rating": 10, "favorite": false, "interlude": false},
                    {"name": "She Bangs the Drums", "rating": 8.5, "favorite": false, "interlude": false},
                    {"name": "Waterfall", "rating": 8.5, "favorite": false, "interlude": false},
                    {"name": "Don't Stop", "rating": 4, "favorite": false, "interlude": true},
                    {"name": "Bye Bye Bad Man", "rating": 8, "favorite": false, "interlude": false},
                    {"name": "Elizabeth My Dear", "rating": 5, "favorite": false, "interlude": true},
                    {"name": "(Song for My) Sugar Spun Sister", "rating": 8.5, "favorite": false, "interlude": false},
                    {"name": "Made of Stone", "rating": 8.5, "favorite": false, "interlude": false},
                    {"name": "Shoot You Down", "rating": 8, "favorite": false, "interlude": false},
                    {"name": "This Is the One", "rating": 8.5, "favorite": false, "interlude": false},
                    {"name": "I Am the Resurrection", "rating": 9.5, "favorite": false, "interlude": false},
                    {"name": "Fools Gold", "rating": 9.5, "favorite": true, "interlude": false}
                ]
            },
            {
                "artist": "Dire Straits",
                "album": "Communiqué",
                "year": 1979,
                "comment": "Das beste Dire Straits Album change my mind.",
                "songs": [
                    {"name": "Once Upon A Time In The West", "rating": 8, "favorite": false, "interlude": false},
                    {"name": "News", "rating": 9, "favorite": false, "interlude": false},
                    {"name": "Where Do You Think You're Going", "rating": 8.5, "favorite": false, "interlude": false},
                    {"name": "Communiqué", "rating": 9.5, "favorite": false, "interlude": false},
                    {"name": "Lady Writer", "rating": 10, "favorite": true, "interlude": false},
                    {"name": "Angel Of Mercy", "rating": 8.5, "favorite": false, "interlude": false},
                    {"name": "Portobello Belle", "rating": 7.5, "favorite": false, "interlude": false},
                    {"name": "Single Handed Sailor", "rating": 8.5, "favorite": false, "interlude": false},
                    {"name": "Follow Me Home", "rating": 7, "favorite": false, "interlude": false}
                ]
            }
        ];

        // System initialization
        function initializeSystem() {
            cleanAlbumData();
            updateSystemStats();
            executeCommand('albums');
            
            // Type effect for command line
            typeCommand();
        }

        function cleanAlbumData() {
            const uniqueAlbums = [];
            const seen = new Set();
            
            albumsData.forEach(album => {
                const key = `${album.artist}-${album.album}`;
                if (!seen.has(key)) {
                    seen.add(key);
                    uniqueAlbums.push(album);
                }
            });
            
            albums = uniqueAlbums;
            currentAlbums = [...albums];
        }

        function typeCommand() {
            const commands = [
                'execute music_interface.exe',
                'analyzing neural patterns...',
                'calibrating audio matrix...',
                'system ready for input'
            ];
            
            let commandIndex = 0;
            
            setInterval(() => {
                document.getElementById('commandText').textContent = commands[commandIndex];
                commandIndex = (commandIndex + 1) % commands.length;
            }, 3000);
        }

        function updateSystemStats() {
            const totalSongs = albums.reduce((sum, album) => sum + album.songs.length, 0);
            const totalFavorites = albums.reduce((sum, album) => 
                sum + album.songs.filter(song => song.favorite).length, 0);
            
            const allRatings = albums.flatMap(album => 
                album.songs.filter(song => !song.interlude).map(song => song.rating));
            const avgRating = allRatings.length > 0 ? 
                (allRatings.reduce((a, b) => a + b, 0) / allRatings.length).toFixed(1) : '0.0';
            
            document.getElementById('systemAlbumCount').textContent = albums.length;
            document.getElementById('systemSongCount').textContent = totalSongs;
            document.getElementById('systemAvgRating').textContent = avgRating;
            document.getElementById('systemTimestamp').textContent = new Date().toLocaleString('de-DE');
        }

        function executeCommand(module) {
            currentModule = module;
            
            // Update active menu
            document.querySelectorAll('.menu-option').forEach(opt => opt.classList.remove('active'));
            event?.target.closest('.menu-option')?.classList.add('active');
            
            // Update window title and content
            const titles = {
                'albums': 'ALBUM_MATRIX.EXE',
                'stats': 'DATA_ANALYSIS.EXE',
                'favorites': 'PRIORITY_TRACKS.EXE',
                'top-rated': 'TOP_RANKED.EXE',
                'neural-scan': 'NEURAL_SCAN.EXE',
                'system-info': 'SYSTEM_INFO.EXE'
            };
            
            document.getElementById('windowTitle').textContent = titles[module] || 'UNKNOWN.EXE';
            
            switch(module) {
                case 'albums':
                    renderAlbumsMatrix();
                    break;
                case 'stats':
                    renderDataAnalysis();
                    break;
                case 'favorites':
                    renderPriorityTracks();
                    break;
                case 'top-rated':
                    renderTopRanked();
                    break;
                case 'neural-scan':
                    renderNeuralScan();
                    break;
                case 'system-info':
                    renderSystemInfo();
                    break;
            }
        }

        function renderAlbumsMatrix() {
            const content = document.getElementById('windowContent');
            
            const html = `
                <div class="controls-panel">
                    <div class="control-group">
                        <label class="control-label">SEARCH_QUERY:</label>
                        <input type="text" id="searchInput" placeholder="Artist oder Album..." onkeyup="filterAlbums()">
                    </div>
                    <div class="control-group">
                        <label class="control-label">SORT_ALGORITHM:</label>
                        <select id="sortSelect" onchange="sortAlbums()">
                            <option value="rating-desc">RATING_HIGH_TO_LOW</option>
                            <option value="rating-asc">RATING_LOW_TO_HIGH</option>
                            <option value="artist-asc">ARTIST_A_TO_Z</option>
                            <option value="year-desc">YEAR_NEW_TO_OLD</option>
                            <option value="year-asc">YEAR_OLD_TO_NEW</option>
                        </select>
                    </div>
                </div>
                
                <div class="album-matrix" id="albumMatrix">
                    <!-- Albums will be rendered here -->
                </div>
                
                <div class="pagination-bar" id="paginationBar">
                    <!-- Pagination will be rendered here -->
                </div>
            `;
            
            content.innerHTML = html;
            renderAlbumsList();
        }

        function renderAlbumsList() {
            const matrix = document.getElementById('albumMatrix');
            const startIndex = (currentPage - 1) * albumsPerPage;
            const endIndex = startIndex + albumsPerPage;
            const pageAlbums = currentAlbums.slice(startIndex, endIndex);
            
            let html = '';
            
            pageAlbums.forEach((album, index) => {
                const avgRating = calculateAverageRating(album.songs);
                const globalIndex = startIndex + index;
                
                html += `
                    <div class="album-row" id="album-${globalIndex}">
                        <div class="album-header-row" onclick="toggleAlbumDetails(${globalIndex})">
                            <div class="status-indicator">◉</div>
                            <div class="album-title-cell">${album.artist} - ${album.album}</div>
                            <div class="album-year-cell">YEAR: ${album.year}</div>
                            <div class="album-tracks-cell">TRACKS: ${album.songs.length}</div>
                            <div class="album-rating-cell ${getRatingClass(avgRating)}">${avgRating}/10</div>
                        </div>
                        <div class="album-details" id="details-${globalIndex}">
                            ${renderTrackMatrix(album.songs)}
                            ${album.comment ? `<div class="album-comment-box">${album.comment}</div>` : ''}
                        </div>
                    </div>
                `;
            });
            
            matrix.innerHTML = html;
            renderPagination();
        }

        function renderTrackMatrix(songs) {
            let html = `
                <div class="tracks-grid">
                    <div class="tracks-header">#</div>
                    <div class="tracks-header">TRACK_NAME</div>
                    <div class="tracks-header">RATING</div>
                    <div class="tracks-header">STATUS</div>
            `;
            
            songs.forEach((song, index) => {
                html += `
                    <div class="track-row">
                        <div class="track-number">${String(index + 1).padStart(2, '0')}</div>
                        <div class="track-name ${song.favorite ? 'favorite' : ''} ${song.interlude ? 'interlude' : ''}">${song.name}</div>
                        <div class="track-rating ${getRatingClass(song.rating)}">${song.rating}/10</div>
                        <div class="track-status">
                            ${song.favorite ? '★FAV' : ''}
                            ${song.interlude ? 'INT' : ''}
                            ${!song.favorite && !song.interlude ? 'STD' : ''}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }

        function renderDataAnalysis() {
            const content = document.getElementById('windowContent');
            
            const totalSongs = albums.reduce((sum, album) => sum + album.songs.length, 0);
            const totalFavorites = albums.reduce((sum, album) => 
                sum + album.songs.filter(song => song.favorite).length, 0);
            const totalInterludes = albums.reduce((sum, album) => 
                sum + album.songs.filter(song => song.interlude).length, 0);
            
            const allRatings = albums.flatMap(album => 
                album.songs.filter(song => !song.interlude).map(song => song.rating));
            const avgRating = allRatings.reduce((a, b) => a + b, 0) / allRatings.length;
            
            const ratingDistribution = {};
            for (let i = 1; i <= 10; i++) {
                ratingDistribution[i] = allRatings.filter(rating => 
                    Math.floor(rating) === i || (i === 10 && rating === 10)).length;
            }
            
            const html = `
                <h3 style="color: #ffff00; margin-bottom: 20px;">🧠 NEURAL MUSIC ANALYSIS COMPLETE</h3>
                
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>PARAMETER</th>
                            <th>VALUE</th>
                            <th>STATUS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>TOTAL_ALBUMS</td>
                            <td>${albums.length}</td>
                            <td style="color: #00ff41;">LOADED</td>
                        </tr>
                        <tr>
                            <td>TOTAL_TRACKS</td>
                            <td>${totalSongs}</td>
                            <td style="color: #00ff41;">INDEXED</td>
                        </tr>
                        <tr>
                            <td>PRIORITY_TRACKS</td>
                            <td>${totalFavorites}</td>
                            <td style="color: #ff4400;">FLAGGED</td>
                        </tr>
                        <tr>
                            <td>INTERLUDES</td>
                            <td>${totalInterludes}</td>
                            <td style="color: #888;">FILTERED</td>
                        </tr>
                        <tr>
                            <td>AVG_NEURAL_SCORE</td>
                            <td>${avgRating.toFixed(2)}/10</td>
                            <td style="color: #ffff00;">CALCULATED</td>
                        </tr>
                    </tbody>
                </table>
                
                <h4 style="color: #ffff00; margin: 20px 0 10px 0;">RATING DISTRIBUTION MATRIX:</h4>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>SCORE</th>
                            <th>COUNT</th>
                            <th>PERCENTAGE</th>
                            <th>VISUAL</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            for (let i = 10; i >= 1; i--) {
                const count = ratingDistribution[i] || 0;
                const percentage = ((count / allRatings.length) * 100).toFixed(1);
                const barWidth = Math.round((count / Math.max(...Object.values(ratingDistribution))) * 20);
                const bar = '█'.repeat(barWidth) + '░'.repeat(20 - barWidth);
                
                html += `
                    <tr>
                        <td class="${getRatingClass(i)}">${i}/10</td>
                        <td>${count}</td>
                        <td>${percentage}%</td>
                        <td style="font-family: monospace;">${bar}</td>
                    </tr>
                `;
            }
            
            html += `
                    </tbody>
                </table>
                
                <div style="margin-top: 20px; padding: 15px; border: 1px solid #00ff41; background: rgba(0,255,65,0.05);">
                    <h4 style="color: #ffff00;">🔮 ALGORITHMIC INSIGHTS:</h4>
                    <p>• Durchschnittliche Bewertung liegt bei <span style="color: #00ff41;">${avgRating.toFixed(2)}/10</span></p>
                    <p>• <span style="color: #ff4400;">${totalFavorites}</span> Tracks wurden als neuralgisch wertvoll eingestuft</p>
                    <p>• Höchste Bewertungsdichte bei <span style="color: #ffff00;">${Object.keys(ratingDistribution).reduce((a, b) => ratingDistribution[a] > ratingDistribution[b] ? a : b)}/10</span> Punkten</p>
                    <p>• Qualitätsindex: <span style="color: #00ff41;">${(avgRating * 10).toFixed(0)}%</span></p>
                </div>
            `;
            
            content.innerHTML = html;
        }

        function renderPriorityTracks() {
            const content = document.getElementById('windowContent');
            const favorites = [];
            
            albums.forEach(album => {
                album.songs.filter(song => song.favorite).forEach(song => {
                    favorites.push({
                        artist: album.artist,
                        album: album.album,
                        song: song.name,
                        rating: song.rating
                    });
                });
            });
            
            favorites.sort((a, b) => b.rating - a.rating);
            
            let html = `
                <h3 style="color: #ff4400; margin-bottom: 20px;">⭐ PRIORITY TRACKS DETECTED</h3>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
                
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>RANK</th>
                            <th>ARTIST</th>
                            <th>ALBUM</th>
                            <th>TRACK</th>
                            <th>NEURAL_SCORE</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            favorites.forEach((fav, index) => {
                html += `
                    <tr>
                        <td style="color: #ffff00; font-weight: bold;">#${index + 1}</td>
                        <td>${fav.artist}</td>
                        <td>${fav.album}</td>
                        <td style="color: #ff4400;">${fav.song}</td>
                        <td class="${getRatingClass(fav.rating)}">${fav.rating}/10</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                </table>
                
                <div style="margin-top: 20px; padding: 15px; border: 1px solid #ff4400; background: rgba(255,68,0,0.05);">
                    <p style="color: #ff4400;">🧠 NEURAL ANALYSIS: ${favorites.length} tracks haben kritische Bedeutung für das Musikprofil erreicht.</p>
                </div>
            `;
            
            content.innerHTML = html;
        }

        function renderTopRanked() {
            const content = document.getElementById('windowContent');
            const allSongs = [];
            
            albums.forEach(album => {
                album.songs.filter(song => !song.interlude).forEach(song => {
                    allSongs.push({
                        artist: album.artist,
                        album: album.album,
                        song: song.name,
                        rating: song.rating,
                        favorite: song.favorite
                    });
                });
            });
            
            allSongs.sort((a, b) => b.rating - a.rating);
            const topSongs = allSongs.slice(0, 20);
            
            let html = `
                <h3 style="color: #ff0040; margin-bottom: 20px;">🏆 TOP RANKED NEURAL PATTERNS</h3>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
                
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>RANK</th>
                            <th>ARTIST</th>
                            <th>ALBUM</th>
                            <th>TRACK</th>
                            <th>SCORE</th>
                            <th>FLAGS</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            topSongs.forEach((song, index) => {
                const rankColor = index < 3 ? '#ff0040' : index < 10 ? '#ff4400' : '#ffaa00';
                html += `
                    <tr>
                        <td style="color: ${rankColor}; font-weight: bold;">#${index + 1}</td>
                        <td>${song.artist}</td>
                        <td>${song.album}</td>
                        <td>${song.song}</td>
                        <td class="${getRatingClass(song.rating)}">${song.rating}/10</td>
                        <td>${song.favorite ? '<span style="color: #ff4400;">★FAV</span>' : '<span style="color: #888;">STD</span>'}</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                </table>
                
                <div style="margin-top: 20px; padding: 15px; border: 1px solid #ff0040; background: rgba(255,0,64,0.05);">
                    <p style="color: #ff0040;">🎯 TOP 20 TRACKS repräsentieren ${((topSongs.length / allSongs.length) * 100).toFixed(1)}% der Gesamtsammlung</p>
                </div>
            `;
            
            content.innerHTML = html;
        }

        function renderNeuralScan() {
            const content = document.getElementById('windowContent');
            
            const html = `
                <h3 style="color: #ff4400; margin-bottom: 20px;">🧠 NEURAL PATTERN ANALYSIS</h3>
                
                <div style="margin-bottom: 20px;">
                    <div class="loading-bar">
                        <div class="loading-progress"></div>
                    </div>
                    <p style="margin-top: 10px; color: #888;">Scanning neural music patterns...</p>
                </div>
                
                <div style="padding: 20px; border: 1px solid #00ff41; background: rgba(0,255,65,0.05); margin-bottom: 20px;">
                    <h4 style="color: #ffff00; margin-bottom: 15px;">🔬 ALGORITHMIC PERSONALITY ANALYSIS</h4>
                    <p>• <span style="color: #00ff41;">MUZIK_PROFIL_ID:</span> DOME_v2.4.1</p>
                    <p>• <span style="color: #00ff41;">DOMINANT_GENRE:</span> Alternative Rock / Brit-Pop</p>
                    <p>• <span style="color: #00ff41;">NEURAL_BIAS:</span> 90er Decade Preference</p>
                    <p>• <span style="color: #00ff41;">RATING_STYLE:</span> Critical but Fair</p>
                    <p>• <span style="color: #00ff41;">FAVORITE_THRESHOLD:</span> 9.5+ Rating Required</p>
                </div>
                
                <div style="padding: 20px; border: 1px solid #ff4400; background: rgba(255,68,0,0.05); margin-bottom: 20px;">
                    <h4 style="color: #ff4400; margin-bottom: 15px;">🎵 ACOUSTIC PATTERN DETECTION</h4>
                    <p>• <span style="color: #ff4400;">MELODIC_PREFERENCE:</span> Complex Harmonies</p>
                    <p>• <span style="color: #ff4400;">LYRICAL_WEIGHT:</span> Narrative-driven Content</p>
                    <p>• <span style="color: #ff4400;">INSTRUMENTAL_FOCUS:</span> Guitar-centric Arrangements</p>
                    <p>• <span style="color: #ff4400;">PRODUCTION_TASTE:</span> Raw > Polished</p>
                </div>
                
                <div style="padding: 20px; border: 1px solid #ffff00; background: rgba(255,255,0,0.05);">
                    <h4 style="color: #ffff00; margin-bottom: 15px;">🎯 RECOMMENDATION ENGINE</h4>
                    <p>• <span style="color: #ffff00;">SIMILAR_ARTISTS:</span> Radiohead, Oasis, Pulp</p>
                    <p>• <span style="color: #ffff00;">DISCOVERY_SUGGESTIONS:</span> Madchester Scene, Shoegaze</p>
                    <p>• <span style="color: #ffff00;">NEURAL_CONFIDENCE:</span> 87.3%</p>
                    <p style="margin-top: 15px; font-style: italic; color: #888;">
                        DISCLAIMER: Diese Analyse basiert auf fortgeschrittenen Algorithmen und Kaffeemolekülen.
                    </p>
                </div>
            `;
            
            content.innerHTML = html;
        }

        function renderSystemInfo() {
            const content = document.getElementById('windowContent');
            
            const html = `
                <h3 style="color: #00ff41; margin-bottom: 20px;">💾 SYSTEM INFORMATION</h3>
                
                <table class="data-table" style="margin-bottom: 20px;">
                    <tr>
                        <th>PARAMETER</th>
                        <th>VALUE</th>
                    </tr>
                    <tr>
                        <td>SYSTEM_NAME</td>
                        <td>DOME.MUSIC.SYSTEM.EXE</td>
                    </tr>
                    <tr>
                        <td>VERSION</td>
                        <td>v2.4.1 (Neural Enhanced)</td>
                    </tr>
                    <tr>
                        <td>BUILD_DATE</td>
                        <td>2024.08.21</td>
                    </tr>
                    <tr>
                        <td>ARCHITECTURE</td>
                        <td>Quantum-HTML5-Hybrid</td>
                    </tr>
                    <tr>
                        <td>NEURAL_ENGINE</td>
                        <td>CoffeeScript 3.0</td>
                    </tr>
                    <tr>
                        <td>DATABASE_FORMAT</td>
                        <td>JSON (Human Readable)</td>
                    </tr>
                    <tr>
                        <td>INTERFACE_STYLE</td>
                        <td>Retro-Futuristic Terminal</td>
                    </tr>
                </table>
                
                <div style="padding: 15px; border: 1px solid #00ff41; background: rgba(0,255,65,0.05); margin-bottom: 20px;">
                    <h4 style="color: #ffff00;">🔧 FEATURES</h4>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Album Matrix Visualization</li>
                        <li>Neural Pattern Analysis</li>
                        <li>Priority Track Detection</li>
                        <li>Real-time Statistical Processing</li>
                        <li>Quantum Rating Algorithms</li>
                        <li>CRT Monitor Simulation</li>
                        <li>80s/90s Aesthetic Interface</li>
                    </ul>
                </div>
                
                <div style="padding: 15px; border: 1px solid #888; background: rgba(136,136,136,0.05);">
                    <h4 style="color: #888;">📋 CREDITS</h4>
                    <p>• <span style="color: #00ff41;">CHIEF ALGORITHM ENGINEER:</span> DOME</p>
                    <p>• <span style="color: #00ff41;">NEURAL CONSULTANT:</span> Claude AI</p>
                    <p>• <span style="color: #00ff41;">COFFEE PROVIDER:</span> Local Barista Unit</p>
                    <p>• <span style="color: #00ff41;">INSPIRATION:</span> 90s Hacker Movies</p>
                    <p style="margin-top: 15px; font-style: italic; color: #666;">
                        "In the matrix of music, every song is a choice." - Neo, probably
                    </p>
                </div>
            `;
            
            content.innerHTML = html;
        }

        // Utility functions
        function calculateAverageRating(songs) {
            const nonInterludeSongs = songs.filter(song => !song.interlude);
            if (nonInterludeSongs.length === 0) return 0;
            const sum = nonInterludeSongs.reduce((acc, song) => acc + song.rating, 0);
            return (sum / nonInterludeSongs.length).toFixed(1);
        }

        function getRatingClass(rating) {
            if (rating >= 10) return 'rating-perfect';
            if (rating >= 9) return 'rating-excellent';
            if (rating >= 8) return 'rating-great';
            if (rating >= 7) return 'rating-good';
            if (rating >= 6) return 'rating-okay';
            return 'rating-poor';
        }

        function toggleAlbumDetails(index) {
            const albumRow = document.getElementById(`album-${index}`);
            const details = document.getElementById(`details-${index}`);
            
            if (details.classList.contains('show')) {
                details.classList.remove('show');
                albumRow.classList.remove('expanded');
            } else {
                details.classList.add('show');
                albumRow.classList.add('expanded');
            }
        }

        function filterAlbums() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            currentAlbums = albums.filter(album => 
                album.album.toLowerCase().includes(searchTerm) ||
                album.artist.toLowerCase().includes(searchTerm)
            );
            currentPage = 1;
            renderAlbumsList();
        }

        function sortAlbums() {
            const sortValue = document.getElementById('sortSelect').value;
            const [criteria, order] = sortValue.split('-');
            
            currentAlbums.sort((a, b) => {
                let comparison = 0;
                
                switch(criteria) {
                    case 'artist':
                        comparison = a.artist.localeCompare(b.artist);
                        break;
                    case 'album':
                        comparison = a.album.localeCompare(b.album);
                        break;
                    case 'year':
                        comparison = a.year - b.year;
                        break;
                    case 'rating':
                        const avgA = parseFloat(calculateAverageRating(a.songs));
                        const avgB = parseFloat(calculateAverageRating(b.songs));
                        comparison = avgA - avgB;
                        break;
                }
                
                return order === 'desc' ? -comparison : comparison;
            });
            
            currentPage = 1;
            renderAlbumsList();
        }

        function renderPagination() {
            const totalPages = Math.ceil(currentAlbums.length / albumsPerPage);
            const pagination = document.getElementById('paginationBar');
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }
            
            let html = '';
            
            html += `<span class="page-btn" onclick="changePage(${currentPage - 1})" ${currentPage <= 1 ? 'style="opacity:0.5"' : ''}>◀ PREV</span>`;
            
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                    html += `<span class="page-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</span>`;
                } else if (i === currentPage - 2 || i === currentPage + 2) {
                    html += '<span style="color: #666;">...</span>';
                }
            }
            
            html += `<span class="page-btn" onclick="changePage(${currentPage + 1})" ${currentPage >= totalPages ? 'style="opacity:0.5"' : ''}>NEXT ▶</span>`;
            
            pagination.innerHTML = html;
        }

        function changePage(page) {
            const totalPages = Math.ceil(currentAlbums.length / albumsPerPage);
            if (page < 1 || page > totalPages) return;
            
            currentPage = page;
            renderAlbumsList();
        }

        // Initialize system on page load
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                initializeSystem();
            }, 6000); // Wait for boot sequence
        });
    </script>
</body>
</html>
